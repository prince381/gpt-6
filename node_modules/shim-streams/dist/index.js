
/** __ESM_SHIM_START */
if(typeof process<"u"){let{dirname:e}=await import("path"),{fileURLToPath:i}=await import("url");globalThis.__filename=i(import.meta.url),globalThis.__dirname=e(globalThis.__filename);let{default:a}=await import("module");globalThis.require=a.createRequire(import.meta.url)}
/** __ESM_SHIM_END */

var Va=Object.create;var mn=Object.defineProperty;var Ga=Object.getOwnPropertyDescriptor;var $a=Object.getOwnPropertyNames;var Xa=Object.getPrototypeOf,Za=Object.prototype.hasOwnProperty;var Ja=(h,l)=>()=>(l||h((l={exports:{}}).exports,l),l.exports);var Ka=(h,l,I,ke)=>{if(l&&typeof l=="object"||typeof l=="function")for(let B of $a(l))!Za.call(h,B)&&B!==I&&mn(h,B,{get:()=>l[B],enumerable:!(ke=Ga(l,B))||ke.enumerable});return h};var xa=(h,l,I)=>(I=h!=null?Va(Xa(h)):{},Ka(l||!h||!h.__esModule?mn(I,"default",{value:h,enumerable:!0}):I,h));var pn=Ja((cr,hn)=>{(function(h,l){typeof cr=="object"&&typeof hn<"u"?l(cr):typeof define=="function"&&define.amd?define(["exports"],l):(h=typeof globalThis<"u"?globalThis:h||self,l(h.WebStreamsPolyfill={}))})(cr,function(h){"use strict";var l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:function(e){return"Symbol("+e+")"};function I(){}function ke(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}var B=ke();function w(e){return typeof e=="object"&&e!==null||typeof e=="function"}var Jr=I,br=Promise,yn=Promise.prototype.then,vn=Promise.resolve.bind(br),Sn=Promise.reject.bind(br);function R(e){return new br(e)}function p(e){return vn(e)}function f(e){return Sn(e)}function F(e,r,t){return yn.call(e,r,t)}function P(e,r,t){F(F(e,r,t),void 0,Jr)}function mr(e,r){P(e,r)}function hr(e,r){P(e,void 0,r)}function Z(e,r,t){return F(e,r,t)}function Se(e){F(e,void 0,Jr)}var ze=function(){var e=B&&B.queueMicrotask;if(typeof e=="function")return e;var r=p(void 0);return function(t){return F(r,t)}}();function Ie(e,r,t){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,r,t)}function J(e,r,t){try{return p(Ie(e,r,t))}catch(n){return f(n)}}var Kr=16384,T=function(){function e(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.push=function(r){var t=this._back,n=t;t._elements.length===Kr-1&&(n={_elements:[],_next:void 0}),t._elements.push(r),n!==t&&(this._back=n,t._next=n),++this._size},e.prototype.shift=function(){var r=this._front,t=r,n=this._cursor,a=n+1,i=r._elements,o=i[n];return a===Kr&&(t=r._next,a=0),--this._size,this._cursor=a,r!==t&&(this._front=t),i[n]=void 0,o},e.prototype.forEach=function(r){for(var t=this._cursor,n=this._front,a=n._elements;(t!==a.length||n._next!==void 0)&&!(t===a.length&&(n=n._next,a=n._elements,t=0,a.length===0));)r(a[t]),++t},e.prototype.peek=function(){var r=this._front,t=this._cursor;return r._elements[t]},e}();function xr(e,r){e._ownerReadableStream=r,r._reader=e,r._state==="readable"?_r(e):r._state==="closed"?gn(e):et(e,r._storedError)}function pr(e,r){var t=e._ownerReadableStream;return q(t,r)}function D(e){e._ownerReadableStream._state==="readable"?yr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Rn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function ue(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function _r(e){e._closedPromise=R(function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t})}function et(e,r){_r(e),yr(e,r)}function gn(e){_r(e),rt(e)}function yr(e,r){e._closedPromise_reject!==void 0&&(Se(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Rn(e,r){et(e,r)}function rt(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}var tt=l("[[AbortSteps]]"),nt=l("[[ErrorSteps]]"),vr=l("[[CancelSteps]]"),Sr=l("[[PullSteps]]"),at=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},wn=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Cn(e){return typeof e=="object"||typeof e=="function"}function L(e,r){if(e!==void 0&&!Cn(e))throw new TypeError(r+" is not an object.")}function W(e,r){if(typeof e!="function")throw new TypeError(r+" is not a function.")}function Pn(e){return typeof e=="object"&&e!==null||typeof e=="function"}function it(e,r){if(!Pn(e))throw new TypeError(r+" is not an object.")}function M(e,r,t){if(e===void 0)throw new TypeError("Parameter "+r+" is required in '"+t+"'.")}function gr(e,r,t){if(e===void 0)throw new TypeError(r+" is required in '"+t+"'.")}function Rr(e){return Number(e)}function ot(e){return e===0?0:e}function Tn(e){return ot(wn(e))}function ut(e,r){var t=0,n=Number.MAX_SAFE_INTEGER,a=Number(e);if(a=ot(a),!at(a))throw new TypeError(r+" is not a finite number");if(a=Tn(a),a<t||a>n)throw new TypeError(r+" is outside the accepted range of "+t+" to "+n+", inclusive");return!at(a)||a===0?0:a}function wr(e,r){if(!V(e))throw new TypeError(r+" is not a ReadableStream.")}function le(e){return new fe(e)}function lt(e,r){e._reader._readRequests.push(r)}function Cr(e,r,t){var n=e._reader,a=n._readRequests.shift();t?a._closeSteps():a._chunkSteps(r)}function Fe(e){return e._reader._readRequests.length}function ft(e){var r=e._reader;return!(r===void 0||!Y(r))}var fe=function(){function e(r){if(M(r,1,"ReadableStreamDefaultReader"),wr(r,"First parameter"),G(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");xr(this,r),this._readRequests=new T}return Object.defineProperty(e.prototype,"closed",{get:function(){return Y(this)?this._closedPromise:f(De("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),Y(this)?this._ownerReadableStream===void 0?f(ue("cancel")):pr(this,r):f(De("cancel"))},e.prototype.read=function(){if(!Y(this))return f(De("read"));if(this._ownerReadableStream===void 0)return f(ue("read from"));var r,t,n=R(function(i,o){r=i,t=o}),a={_chunkSteps:function(i){return r({value:i,done:!1})},_closeSteps:function(){return r({value:void 0,done:!0})},_errorSteps:function(i){return t(i)}};return ge(this,a),n},e.prototype.releaseLock=function(){if(!Y(this))throw De("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");D(this)}},e}();Object.defineProperties(fe.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(fe.prototype,l.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Y(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof fe}function ge(e,r){var t=e._ownerReadableStream;t._disturbed=!0,t._state==="closed"?r._closeSteps():t._state==="errored"?r._errorSteps(t._storedError):t._readableStreamController[Sr](r)}function De(e){return new TypeError("ReadableStreamDefaultReader.prototype."+e+" can only be used on a ReadableStreamDefaultReader")}var Pr,Le;typeof l.asyncIterator=="symbol"&&(Le=(Pr={},Pr[l.asyncIterator]=function(){return this},Pr),Object.defineProperty(Le,l.asyncIterator,{enumerable:!1}));var st=function(){function e(r,t){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=r,this._preventCancel=t}return e.prototype.next=function(){var r=this,t=function(){return r._nextSteps()};return this._ongoingPromise=this._ongoingPromise?Z(this._ongoingPromise,t,t):t(),this._ongoingPromise},e.prototype.return=function(r){var t=this,n=function(){return t._returnSteps(r)};return this._ongoingPromise?Z(this._ongoingPromise,n,n):n()},e.prototype._nextSteps=function(){var r=this;if(this._isFinished)return Promise.resolve({value:void 0,done:!0});var t=this._reader;if(t._ownerReadableStream===void 0)return f(ue("iterate"));var n,a,i=R(function(u,d){n=u,a=d}),o={_chunkSteps:function(u){r._ongoingPromise=void 0,ze(function(){return n({value:u,done:!1})})},_closeSteps:function(){r._ongoingPromise=void 0,r._isFinished=!0,D(t),n({value:void 0,done:!0})},_errorSteps:function(u){r._ongoingPromise=void 0,r._isFinished=!0,D(t),a(u)}};return ge(t,o),i},e.prototype._returnSteps=function(r){if(this._isFinished)return Promise.resolve({value:r,done:!0});this._isFinished=!0;var t=this._reader;if(t._ownerReadableStream===void 0)return f(ue("finish iterating"));if(!this._preventCancel){var n=pr(t,r);return D(t),Z(n,function(){return{value:r,done:!0}})}return D(t),p({value:r,done:!0})},e}(),dt={next:function(){return ct(this)?this._asyncIteratorImpl.next():f(bt("next"))},return:function(e){return ct(this)?this._asyncIteratorImpl.return(e):f(bt("return"))}};Le!==void 0&&Object.setPrototypeOf(dt,Le);function Wn(e,r){var t=le(e),n=new st(t,r),a=Object.create(dt);return a._asyncIteratorImpl=n,a}function ct(e){if(!w(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof st}catch{return!1}}function bt(e){return new TypeError("ReadableStreamAsyncIterator."+e+" can only be used on a ReadableSteamAsyncIterator")}var mt=Number.isNaN||function(e){return e!==e};function Re(e){return e.slice()}function ht(e,r,t,n,a){new Uint8Array(e).set(new Uint8Array(t,n,a),r)}function ei(e){return e}function Me(e){return!1}function pt(e,r,t){if(e.slice)return e.slice(r,t);var n=t-r,a=new ArrayBuffer(n);return ht(a,0,e,r,n),a}function En(e){return!(typeof e!="number"||mt(e)||e<0)}function _t(e){var r=pt(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(r)}function Tr(e){var r=e._queue.shift();return e._queueTotalSize-=r.size,e._queueTotalSize<0&&(e._queueTotalSize=0),r.value}function Wr(e,r,t){if(!En(t)||t===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:r,size:t}),e._queueTotalSize+=t}function qn(e){var r=e._queue.peek();return r.value}function U(e){e._queue=new T,e._queueTotalSize=0}var se=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"view",{get:function(){if(!Er(this))throw Or("view");return this._view},enumerable:!1,configurable:!0}),e.prototype.respond=function(r){if(!Er(this))throw Or("respond");if(M(r,1,"respond"),r=ut(r,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Me(this._view.buffer),He(this._associatedReadableByteStreamController,r)},e.prototype.respondWithNewView=function(r){if(!Er(this))throw Or("respondWithNewView");if(M(r,1,"respondWithNewView"),!ArrayBuffer.isView(r))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Me(r.buffer),Ve(this._associatedReadableByteStreamController,r)},e}();Object.defineProperties(se.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(se.prototype,l.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});var K=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"byobRequest",{get:function(){if(!x(this))throw Ce("byobRequest");return Br(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!x(this))throw Ce("desiredSize");return Pt(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!x(this))throw Ce("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");var r=this._controlledReadableByteStream._state;if(r!=="readable")throw new TypeError("The stream (in "+r+" state) is not in the readable state and cannot be closed");we(this)},e.prototype.enqueue=function(r){if(!x(this))throw Ce("enqueue");if(M(r,1,"enqueue"),!ArrayBuffer.isView(r))throw new TypeError("chunk must be an array buffer view");if(r.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(r.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");var t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError("The stream (in "+t+" state) is not in the readable state and cannot be enqueued to");Ue(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!x(this))throw Ce("error");E(this,r)},e.prototype[vr]=function(r){yt(this),U(this);var t=this._cancelAlgorithm(r);return Ye(this),t},e.prototype[Sr]=function(r){var t=this._controlledReadableByteStream;if(this._queueTotalSize>0){var n=this._queue.shift();this._queueTotalSize-=n.byteLength,Rt(this);var a=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);r._chunkSteps(a);return}var i=this._autoAllocateChunkSize;if(i!==void 0){var o=void 0;try{o=new ArrayBuffer(i)}catch(d){r._errorSteps(d);return}var u={buffer:o,bufferByteLength:i,byteOffset:0,byteLength:i,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(u)}lt(t,r),ee(this)},e}();Object.defineProperties(K.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(K.prototype,l.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function x(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof K}function Er(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof se}function ee(e){var r=jn(e);if(!!r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var t=e._pullAlgorithm();P(t,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,ee(e))},function(n){E(e,n)})}}function yt(e){Ar(e),e._pendingPullIntos=new T}function qr(e,r){var t=!1;e._state==="closed"&&(t=!0);var n=vt(r);r.readerType==="default"?Cr(e,n,t):In(e,n,t)}function vt(e){var r=e.bytesFilled,t=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,r/t)}function Qe(e,r,t,n){e._queue.push({buffer:r,byteOffset:t,byteLength:n}),e._queueTotalSize+=n}function St(e,r){var t=r.elementSize,n=r.bytesFilled-r.bytesFilled%t,a=Math.min(e._queueTotalSize,r.byteLength-r.bytesFilled),i=r.bytesFilled+a,o=i-i%t,u=a,d=!1;o>n&&(u=o-r.bytesFilled,d=!0);for(var c=e._queue;u>0;){var b=c.peek(),m=Math.min(u,b.byteLength),S=r.byteOffset+r.bytesFilled;ht(r.buffer,S,b.buffer,b.byteOffset,m),b.byteLength===m?c.shift():(b.byteOffset+=m,b.byteLength-=m),e._queueTotalSize-=m,gt(e,m,r),u-=m}return d}function gt(e,r,t){t.bytesFilled+=r}function Rt(e){e._queueTotalSize===0&&e._closeRequested?(Ye(e),qe(e._controlledReadableByteStream)):ee(e)}function Ar(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function wt(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;var r=e._pendingPullIntos.peek();St(e,r)&&(Ne(e),qr(e._controlledReadableByteStream,r))}}function An(e,r,t){var n=e._controlledReadableByteStream,a=1;r.constructor!==DataView&&(a=r.constructor.BYTES_PER_ELEMENT);var i=r.constructor,o=r.buffer,u={buffer:o,bufferByteLength:o.byteLength,byteOffset:r.byteOffset,byteLength:r.byteLength,bytesFilled:0,elementSize:a,viewConstructor:i,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(u),Et(n,t);return}if(n._state==="closed"){var d=new i(u.buffer,u.byteOffset,0);t._closeSteps(d);return}if(e._queueTotalSize>0){if(St(e,u)){var c=vt(u);Rt(e),t._chunkSteps(c);return}if(e._closeRequested){var b=new TypeError("Insufficient bytes to fill elements in the given buffer");E(e,b),t._errorSteps(b);return}}e._pendingPullIntos.push(u),Et(n,t),ee(e)}function Bn(e,r){var t=e._controlledReadableByteStream;if(jr(t))for(;qt(t)>0;){var n=Ne(e);qr(t,n)}}function On(e,r,t){if(gt(e,r,t),!(t.bytesFilled<t.elementSize)){Ne(e);var n=t.bytesFilled%t.elementSize;if(n>0){var a=t.byteOffset+t.bytesFilled,i=pt(t.buffer,a-n,a);Qe(e,i,0,i.byteLength)}t.bytesFilled-=n,qr(e._controlledReadableByteStream,t),wt(e)}}function Ct(e,r){var t=e._pendingPullIntos.peek();Ar(e);var n=e._controlledReadableByteStream._state;n==="closed"?Bn(e):On(e,r,t),ee(e)}function Ne(e){var r=e._pendingPullIntos.shift();return r}function jn(e){var r=e._controlledReadableByteStream;if(r._state!=="readable"||e._closeRequested||!e._started)return!1;if(ft(r)&&Fe(r)>0||jr(r)&&qt(r)>0)return!0;var t=Pt(e);return t>0}function Ye(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function we(e){var r=e._controlledReadableByteStream;if(!(e._closeRequested||r._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0){var t=e._pendingPullIntos.peek();if(t.bytesFilled>0){var n=new TypeError("Insufficient bytes to fill elements in the given buffer");throw E(e,n),n}}Ye(e),qe(r)}}function Ue(e,r){var t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){var n=r.buffer,a=r.byteOffset,i=r.byteLength,o=n;if(e._pendingPullIntos.length>0){var u=e._pendingPullIntos.peek();Me(u.buffer),u.buffer=u.buffer}if(Ar(e),ft(t))if(Fe(t)===0)Qe(e,o,a,i);else{e._pendingPullIntos.length>0&&Ne(e);var d=new Uint8Array(o,a,i);Cr(t,d,!1)}else jr(t)?(Qe(e,o,a,i),wt(e)):Qe(e,o,a,i);ee(e)}}function E(e,r){var t=e._controlledReadableByteStream;t._state==="readable"&&(yt(e),U(e),Ye(e),xt(t,r))}function Br(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){var r=e._pendingPullIntos.peek(),t=new Uint8Array(r.buffer,r.byteOffset+r.bytesFilled,r.byteLength-r.bytesFilled),n=Object.create(se.prototype);zn(n,e,t),e._byobRequest=n}return e._byobRequest}function Pt(e){var r=e._controlledReadableByteStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function He(e,r){var t=e._pendingPullIntos.peek(),n=e._controlledReadableByteStream._state;if(n==="closed"){if(r!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(r===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(t.bytesFilled+r>t.byteLength)throw new RangeError("bytesWritten out of range")}t.buffer=t.buffer,Ct(e,r)}function Ve(e,r){var t=e._pendingPullIntos.peek(),n=e._controlledReadableByteStream._state;if(n==="closed"){if(r.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(r.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(t.byteOffset+t.bytesFilled!==r.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(t.bufferByteLength!==r.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(t.bytesFilled+r.byteLength>t.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");var a=r.byteLength;t.buffer=r.buffer,Ct(e,a)}function Tt(e,r,t,n,a,i,o){r._controlledReadableByteStream=e,r._pullAgain=!1,r._pulling=!1,r._byobRequest=null,r._queue=r._queueTotalSize=void 0,U(r),r._closeRequested=!1,r._started=!1,r._strategyHWM=i,r._pullAlgorithm=n,r._cancelAlgorithm=a,r._autoAllocateChunkSize=o,r._pendingPullIntos=new T,e._readableStreamController=r;var u=t();P(p(u),function(){r._started=!0,ee(r)},function(d){E(r,d)})}function kn(e,r,t){var n=Object.create(K.prototype),a=function(){},i=function(){return p(void 0)},o=function(){return p(void 0)};r.start!==void 0&&(a=function(){return r.start(n)}),r.pull!==void 0&&(i=function(){return r.pull(n)}),r.cancel!==void 0&&(o=function(d){return r.cancel(d)});var u=r.autoAllocateChunkSize;if(u===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Tt(e,n,a,i,o,t,u)}function zn(e,r,t){e._associatedReadableByteStreamController=r,e._view=t}function Or(e){return new TypeError("ReadableStreamBYOBRequest.prototype."+e+" can only be used on a ReadableStreamBYOBRequest")}function Ce(e){return new TypeError("ReadableByteStreamController.prototype."+e+" can only be used on a ReadableByteStreamController")}function Wt(e){return new de(e)}function Et(e,r){e._reader._readIntoRequests.push(r)}function In(e,r,t){var n=e._reader,a=n._readIntoRequests.shift();t?a._closeSteps(r):a._chunkSteps(r)}function qt(e){return e._reader._readIntoRequests.length}function jr(e){var r=e._reader;return!(r===void 0||!re(r))}var de=function(){function e(r){if(M(r,1,"ReadableStreamBYOBReader"),wr(r,"First parameter"),G(r))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!x(r._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");xr(this,r),this._readIntoRequests=new T}return Object.defineProperty(e.prototype,"closed",{get:function(){return re(this)?this._closedPromise:f(Ge("closed"))},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),re(this)?this._ownerReadableStream===void 0?f(ue("cancel")):pr(this,r):f(Ge("cancel"))},e.prototype.read=function(r){if(!re(this))return f(Ge("read"));if(!ArrayBuffer.isView(r))return f(new TypeError("view must be an array buffer view"));if(r.byteLength===0)return f(new TypeError("view must have non-zero byteLength"));if(r.buffer.byteLength===0)return f(new TypeError("view's buffer must have non-zero byteLength"));if(Me(r.buffer),this._ownerReadableStream===void 0)return f(ue("read from"));var t,n,a=R(function(o,u){t=o,n=u}),i={_chunkSteps:function(o){return t({value:o,done:!1})},_closeSteps:function(o){return t({value:o,done:!0})},_errorSteps:function(o){return n(o)}};return At(this,r,i),a},e.prototype.releaseLock=function(){if(!re(this))throw Ge("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");D(this)}},e}();Object.defineProperties(de.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(de.prototype,l.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function re(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof de}function At(e,r,t){var n=e._ownerReadableStream;n._disturbed=!0,n._state==="errored"?t._errorSteps(n._storedError):An(n._readableStreamController,r,t)}function Ge(e){return new TypeError("ReadableStreamBYOBReader.prototype."+e+" can only be used on a ReadableStreamBYOBReader")}function Pe(e,r){var t=e.highWaterMark;if(t===void 0)return r;if(mt(t)||t<0)throw new RangeError("Invalid highWaterMark");return t}function $e(e){var r=e.size;return r||function(){return 1}}function Xe(e,r){L(e,r);var t=e?.highWaterMark,n=e?.size;return{highWaterMark:t===void 0?void 0:Rr(t),size:n===void 0?void 0:Fn(n,r+" has member 'size' that")}}function Fn(e,r){return W(e,r),function(t){return Rr(e(t))}}function Dn(e,r){L(e,r);var t=e?.abort,n=e?.close,a=e?.start,i=e?.type,o=e?.write;return{abort:t===void 0?void 0:Ln(t,e,r+" has member 'abort' that"),close:n===void 0?void 0:Mn(n,e,r+" has member 'close' that"),start:a===void 0?void 0:Qn(a,e,r+" has member 'start' that"),write:o===void 0?void 0:Nn(o,e,r+" has member 'write' that"),type:i}}function Ln(e,r,t){return W(e,t),function(n){return J(e,r,[n])}}function Mn(e,r,t){return W(e,t),function(){return J(e,r,[])}}function Qn(e,r,t){return W(e,t),function(n){return Ie(e,r,[n])}}function Nn(e,r,t){return W(e,t),function(n,a){return J(e,r,[n,a])}}function Bt(e,r){if(!be(e))throw new TypeError(r+" is not a WritableStream.")}function Yn(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}var Un=typeof AbortController=="function";function Hn(){if(Un)return new AbortController}var ce=function(){function e(r,t){r===void 0&&(r={}),t===void 0&&(t={}),r===void 0?r=null:it(r,"First parameter");var n=Xe(t,"Second parameter"),a=Dn(r,"First parameter");jt(this);var i=a.type;if(i!==void 0)throw new RangeError("Invalid type is specified");var o=$e(n),u=Pe(n,1);ia(this,a,u,o)}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!be(this))throw er("locked");return me(this)},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),be(this)?me(this)?f(new TypeError("Cannot abort a stream that already has a writer")):Ze(this,r):f(er("abort"))},e.prototype.close=function(){return be(this)?me(this)?f(new TypeError("Cannot close a stream that already has a writer")):O(this)?f(new TypeError("Cannot close an already-closing stream")):kt(this):f(er("close"))},e.prototype.getWriter=function(){if(!be(this))throw er("getWriter");return Ot(this)},e}();Object.defineProperties(ce.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(ce.prototype,l.toStringTag,{value:"WritableStream",configurable:!0});function Ot(e){return new he(e)}function Vn(e,r,t,n,a,i){a===void 0&&(a=1),i===void 0&&(i=function(){return 1});var o=Object.create(ce.prototype);jt(o);var u=Object.create(ne.prototype);return Mt(o,u,e,r,t,n,a,i),o}function jt(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new T,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function be(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof ce}function me(e){return e._writer!==void 0}function Ze(e,r){var t;if(e._state==="closed"||e._state==="errored")return p(void 0);e._writableStreamController._abortReason=r,(t=e._writableStreamController._abortController)===null||t===void 0||t.abort();var n=e._state;if(n==="closed"||n==="errored")return p(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;var a=!1;n==="erroring"&&(a=!0,r=void 0);var i=R(function(o,u){e._pendingAbortRequest={_promise:void 0,_resolve:o,_reject:u,_reason:r,_wasAlreadyErroring:a}});return e._pendingAbortRequest._promise=i,a||zr(e,r),i}function kt(e){var r=e._state;if(r==="closed"||r==="errored")return f(new TypeError("The stream (in "+r+" state) is not in the writable state and cannot be closed"));var t=R(function(a,i){var o={_resolve:a,_reject:i};e._closeRequest=o}),n=e._writer;return n!==void 0&&e._backpressure&&r==="writable"&&Ur(n),oa(e._writableStreamController),t}function Gn(e){var r=R(function(t,n){var a={_resolve:t,_reject:n};e._writeRequests.push(a)});return r}function kr(e,r){var t=e._state;if(t==="writable"){zr(e,r);return}Ir(e)}function zr(e,r){var t=e._writableStreamController;e._state="erroring",e._storedError=r;var n=e._writer;n!==void 0&&It(n,r),!Kn(e)&&t._started&&Ir(e)}function Ir(e){e._state="errored",e._writableStreamController[nt]();var r=e._storedError;if(e._writeRequests.forEach(function(a){a._reject(r)}),e._writeRequests=new T,e._pendingAbortRequest===void 0){Je(e);return}var t=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,t._wasAlreadyErroring){t._reject(r),Je(e);return}var n=e._writableStreamController[tt](t._reason);P(n,function(){t._resolve(),Je(e)},function(a){t._reject(a),Je(e)})}function $n(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Xn(e,r){e._inFlightWriteRequest._reject(r),e._inFlightWriteRequest=void 0,kr(e,r)}function Zn(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0;var r=e._state;r==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";var t=e._writer;t!==void 0&&Ut(t)}function Jn(e,r){e._inFlightCloseRequest._reject(r),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(r),e._pendingAbortRequest=void 0),kr(e,r)}function O(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Kn(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function xn(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function ea(e){e._inFlightWriteRequest=e._writeRequests.shift()}function Je(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);var r=e._writer;r!==void 0&&Nr(r,e._storedError)}function Fr(e,r){var t=e._writer;t!==void 0&&r!==e._backpressure&&(r?ba(t):Ur(t)),e._backpressure=r}var he=function(){function e(r){if(M(r,1,"WritableStreamDefaultWriter"),Bt(r,"First parameter"),me(r))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=r,r._writer=this;var t=r._state;if(t==="writable")!O(r)&&r._backpressure?tr(this):Ht(this),rr(this);else if(t==="erroring")Yr(this,r._storedError),rr(this);else if(t==="closed")Ht(this),da(this);else{var n=r._storedError;Yr(this,n),Yt(this,n)}}return Object.defineProperty(e.prototype,"closed",{get:function(){return te(this)?this._closedPromise:f(ae("closed"))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!te(this))throw ae("desiredSize");if(this._ownerWritableStream===void 0)throw Te("desiredSize");return aa(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ready",{get:function(){return te(this)?this._readyPromise:f(ae("ready"))},enumerable:!1,configurable:!0}),e.prototype.abort=function(r){return r===void 0&&(r=void 0),te(this)?this._ownerWritableStream===void 0?f(Te("abort")):ra(this,r):f(ae("abort"))},e.prototype.close=function(){if(!te(this))return f(ae("close"));var r=this._ownerWritableStream;return r===void 0?f(Te("close")):O(r)?f(new TypeError("Cannot close an already-closing stream")):zt(this)},e.prototype.releaseLock=function(){if(!te(this))throw ae("releaseLock");var r=this._ownerWritableStream;r!==void 0&&Ft(this)},e.prototype.write=function(r){return r===void 0&&(r=void 0),te(this)?this._ownerWritableStream===void 0?f(Te("write to")):Dt(this,r):f(ae("write"))},e}();Object.defineProperties(he.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(he.prototype,l.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function te(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof he}function ra(e,r){var t=e._ownerWritableStream;return Ze(t,r)}function zt(e){var r=e._ownerWritableStream;return kt(r)}function ta(e){var r=e._ownerWritableStream,t=r._state;return O(r)||t==="closed"?p(void 0):t==="errored"?f(r._storedError):zt(e)}function na(e,r){e._closedPromiseState==="pending"?Nr(e,r):ca(e,r)}function It(e,r){e._readyPromiseState==="pending"?Vt(e,r):ma(e,r)}function aa(e){var r=e._ownerWritableStream,t=r._state;return t==="errored"||t==="erroring"?null:t==="closed"?0:Qt(r._writableStreamController)}function Ft(e){var r=e._ownerWritableStream,t=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");It(e,t),na(e,t),r._writer=void 0,e._ownerWritableStream=void 0}function Dt(e,r){var t=e._ownerWritableStream,n=t._writableStreamController,a=ua(n,r);if(t!==e._ownerWritableStream)return f(Te("write to"));var i=t._state;if(i==="errored")return f(t._storedError);if(O(t)||i==="closed")return f(new TypeError("The stream is closing or closed and cannot be written to"));if(i==="erroring")return f(t._storedError);var o=Gn(t);return la(n,r,a),o}var Lt={},ne=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"abortReason",{get:function(){if(!Dr(this))throw Qr("abortReason");return this._abortReason},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signal",{get:function(){if(!Dr(this))throw Qr("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal},enumerable:!1,configurable:!0}),e.prototype.error=function(r){if(r===void 0&&(r=void 0),!Dr(this))throw Qr("error");var t=this._controlledWritableStream._state;t==="writable"&&Nt(this,r)},e.prototype[tt]=function(r){var t=this._abortAlgorithm(r);return Ke(this),t},e.prototype[nt]=function(){U(this)},e}();Object.defineProperties(ne.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(ne.prototype,l.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Dr(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof ne}function Mt(e,r,t,n,a,i,o,u){r._controlledWritableStream=e,e._writableStreamController=r,r._queue=void 0,r._queueTotalSize=void 0,U(r),r._abortReason=void 0,r._abortController=Hn(),r._started=!1,r._strategySizeAlgorithm=u,r._strategyHWM=o,r._writeAlgorithm=n,r._closeAlgorithm=a,r._abortAlgorithm=i;var d=Mr(r);Fr(e,d);var c=t(),b=p(c);P(b,function(){r._started=!0,xe(r)},function(m){r._started=!0,kr(e,m)})}function ia(e,r,t,n){var a=Object.create(ne.prototype),i=function(){},o=function(){return p(void 0)},u=function(){return p(void 0)},d=function(){return p(void 0)};r.start!==void 0&&(i=function(){return r.start(a)}),r.write!==void 0&&(o=function(c){return r.write(c,a)}),r.close!==void 0&&(u=function(){return r.close()}),r.abort!==void 0&&(d=function(c){return r.abort(c)}),Mt(e,a,i,o,u,d,t,n)}function Ke(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function oa(e){Wr(e,Lt,0),xe(e)}function ua(e,r){try{return e._strategySizeAlgorithm(r)}catch(t){return Lr(e,t),1}}function Qt(e){return e._strategyHWM-e._queueTotalSize}function la(e,r,t){try{Wr(e,r,t)}catch(i){Lr(e,i);return}var n=e._controlledWritableStream;if(!O(n)&&n._state==="writable"){var a=Mr(e);Fr(n,a)}xe(e)}function xe(e){var r=e._controlledWritableStream;if(!!e._started&&r._inFlightWriteRequest===void 0){var t=r._state;if(t==="erroring"){Ir(r);return}if(e._queue.length!==0){var n=qn(e);n===Lt?fa(e):sa(e,n)}}}function Lr(e,r){e._controlledWritableStream._state==="writable"&&Nt(e,r)}function fa(e){var r=e._controlledWritableStream;xn(r),Tr(e);var t=e._closeAlgorithm();Ke(e),P(t,function(){Zn(r)},function(n){Jn(r,n)})}function sa(e,r){var t=e._controlledWritableStream;ea(t);var n=e._writeAlgorithm(r);P(n,function(){$n(t);var a=t._state;if(Tr(e),!O(t)&&a==="writable"){var i=Mr(e);Fr(t,i)}xe(e)},function(a){t._state==="writable"&&Ke(e),Xn(t,a)})}function Mr(e){var r=Qt(e);return r<=0}function Nt(e,r){var t=e._controlledWritableStream;Ke(e),zr(t,r)}function er(e){return new TypeError("WritableStream.prototype."+e+" can only be used on a WritableStream")}function Qr(e){return new TypeError("WritableStreamDefaultController.prototype."+e+" can only be used on a WritableStreamDefaultController")}function ae(e){return new TypeError("WritableStreamDefaultWriter.prototype."+e+" can only be used on a WritableStreamDefaultWriter")}function Te(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function rr(e){e._closedPromise=R(function(r,t){e._closedPromise_resolve=r,e._closedPromise_reject=t,e._closedPromiseState="pending"})}function Yt(e,r){rr(e),Nr(e,r)}function da(e){rr(e),Ut(e)}function Nr(e,r){e._closedPromise_reject!==void 0&&(Se(e._closedPromise),e._closedPromise_reject(r),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function ca(e,r){Yt(e,r)}function Ut(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function tr(e){e._readyPromise=R(function(r,t){e._readyPromise_resolve=r,e._readyPromise_reject=t}),e._readyPromiseState="pending"}function Yr(e,r){tr(e),Vt(e,r)}function Ht(e){tr(e),Ur(e)}function Vt(e,r){e._readyPromise_reject!==void 0&&(Se(e._readyPromise),e._readyPromise_reject(r),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function ba(e){tr(e)}function ma(e,r){Yr(e,r)}function Ur(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}var Gt=typeof DOMException<"u"?DOMException:void 0;function ha(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function pa(){var e=function(t,n){this.message=t||"",this.name=n||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}var _a=ha(Gt)?Gt:pa();function $t(e,r,t,n,a,i){var o=le(e),u=Ot(r);e._disturbed=!0;var d=!1,c=p(void 0);return R(function(b,m){var S;if(i!==void 0){if(S=function(){var s=new _a("Aborted","AbortError"),_=[];n||_.push(function(){return r._state==="writable"?Ze(r,s):p(void 0)}),a||_.push(function(){return e._state==="readable"?q(e,s):p(void 0)}),C(function(){return Promise.all(_.map(function(v){return v()}))},!0,s)},i.aborted){S();return}i.addEventListener("abort",S)}function A(){return R(function(s,_){function v(z){z?s():F(ye(),v,_)}v(!1)})}function ye(){return d?p(!0):F(u._readyPromise,function(){return R(function(s,_){ge(o,{_chunkSteps:function(v){c=F(Dt(u,v),void 0,I),s(!1)},_closeSteps:function(){return s(!0)},_errorSteps:_})})})}if(g(e,o._closedPromise,function(s){n?N(!0,s):C(function(){return Ze(r,s)},!0,s)}),g(r,u._closedPromise,function(s){a?N(!0,s):C(function(){return q(e,s)},!0,s)}),k(e,o._closedPromise,function(){t?N():C(function(){return ta(u)})}),O(r)||r._state==="closed"){var $=new TypeError("the destination writable stream closed before all data could be piped to it");a?N(!0,$):C(function(){return q(e,$)},!0,$)}Se(A());function j(){var s=c;return F(c,function(){return s!==c?j():void 0})}function g(s,_,v){s._state==="errored"?v(s._storedError):hr(_,v)}function k(s,_,v){s._state==="closed"?v():mr(_,v)}function C(s,_,v){if(d)return;d=!0,r._state==="writable"&&!O(r)?mr(j(),z):z();function z(){P(s(),function(){return y(_,v)},function(X){return y(!0,X)})}}function N(s,_){d||(d=!0,r._state==="writable"&&!O(r)?mr(j(),function(){return y(s,_)}):y(s,_))}function y(s,_){Ft(u),D(o),i!==void 0&&i.removeEventListener("abort",S),s?m(_):b(void 0)}})}var ie=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!nr(this))throw or("desiredSize");return Hr(this)},enumerable:!1,configurable:!0}),e.prototype.close=function(){if(!nr(this))throw or("close");if(!pe(this))throw new TypeError("The stream is not in a state that permits close");Ee(this)},e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!nr(this))throw or("enqueue");if(!pe(this))throw new TypeError("The stream is not in a state that permits enqueue");return ir(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!nr(this))throw or("error");H(this,r)},e.prototype[vr]=function(r){U(this);var t=this._cancelAlgorithm(r);return ar(this),t},e.prototype[Sr]=function(r){var t=this._controlledReadableStream;if(this._queue.length>0){var n=Tr(this);this._closeRequested&&this._queue.length===0?(ar(this),qe(t)):We(this),r._chunkSteps(n)}else lt(t,r),We(this)},e}();Object.defineProperties(ie.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(ie.prototype,l.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function nr(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof ie}function We(e){var r=Xt(e);if(!!r){if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;var t=e._pullAlgorithm();P(t,function(){e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,We(e))},function(n){H(e,n)})}}function Xt(e){var r=e._controlledReadableStream;if(!pe(e)||!e._started)return!1;if(G(r)&&Fe(r)>0)return!0;var t=Hr(e);return t>0}function ar(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ee(e){if(!!pe(e)){var r=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(ar(e),qe(r))}}function ir(e,r){if(!!pe(e)){var t=e._controlledReadableStream;if(G(t)&&Fe(t)>0)Cr(t,r,!1);else{var n=void 0;try{n=e._strategySizeAlgorithm(r)}catch(a){throw H(e,a),a}try{Wr(e,r,n)}catch(a){throw H(e,a),a}}We(e)}}function H(e,r){var t=e._controlledReadableStream;t._state==="readable"&&(U(e),ar(e),xt(t,r))}function Hr(e){var r=e._controlledReadableStream._state;return r==="errored"?null:r==="closed"?0:e._strategyHWM-e._queueTotalSize}function ya(e){return!Xt(e)}function pe(e){var r=e._controlledReadableStream._state;return!e._closeRequested&&r==="readable"}function Zt(e,r,t,n,a,i,o){r._controlledReadableStream=e,r._queue=void 0,r._queueTotalSize=void 0,U(r),r._started=!1,r._closeRequested=!1,r._pullAgain=!1,r._pulling=!1,r._strategySizeAlgorithm=o,r._strategyHWM=i,r._pullAlgorithm=n,r._cancelAlgorithm=a,e._readableStreamController=r;var u=t();P(p(u),function(){r._started=!0,We(r)},function(d){H(r,d)})}function va(e,r,t,n){var a=Object.create(ie.prototype),i=function(){},o=function(){return p(void 0)},u=function(){return p(void 0)};r.start!==void 0&&(i=function(){return r.start(a)}),r.pull!==void 0&&(o=function(){return r.pull(a)}),r.cancel!==void 0&&(u=function(d){return r.cancel(d)}),Zt(e,a,i,o,u,t,n)}function or(e){return new TypeError("ReadableStreamDefaultController.prototype."+e+" can only be used on a ReadableStreamDefaultController")}function Sa(e,r){return x(e._readableStreamController)?Ra(e):ga(e)}function ga(e,r){var t=le(e),n=!1,a=!1,i=!1,o=!1,u,d,c,b,m,S=R(function(g){m=g});function A(){if(n)return a=!0,p(void 0);n=!0;var g={_chunkSteps:function(k){ze(function(){a=!1;var C=k,N=k;i||ir(c._readableStreamController,C),o||ir(b._readableStreamController,N),n=!1,a&&A()})},_closeSteps:function(){n=!1,i||Ee(c._readableStreamController),o||Ee(b._readableStreamController),(!i||!o)&&m(void 0)},_errorSteps:function(){n=!1}};return ge(t,g),p(void 0)}function ye(g){if(i=!0,u=g,o){var k=Re([u,d]),C=q(e,k);m(C)}return S}function $(g){if(o=!0,d=g,i){var k=Re([u,d]),C=q(e,k);m(C)}return S}function j(){}return c=Vr(j,A,ye),b=Vr(j,A,$),hr(t._closedPromise,function(g){H(c._readableStreamController,g),H(b._readableStreamController,g),(!i||!o)&&m(void 0)}),[c,b]}function Ra(e){var r=le(e),t=!1,n=!1,a=!1,i=!1,o=!1,u,d,c,b,m,S=R(function(y){m=y});function A(y){hr(y._closedPromise,function(s){y===r&&(E(c._readableStreamController,s),E(b._readableStreamController,s),(!i||!o)&&m(void 0))})}function ye(){re(r)&&(D(r),r=le(e),A(r));var y={_chunkSteps:function(s){ze(function(){n=!1,a=!1;var _=s,v=s;if(!i&&!o)try{v=_t(s)}catch(z){E(c._readableStreamController,z),E(b._readableStreamController,z),m(q(e,z));return}i||Ue(c._readableStreamController,_),o||Ue(b._readableStreamController,v),t=!1,n?j():a&&g()})},_closeSteps:function(){t=!1,i||we(c._readableStreamController),o||we(b._readableStreamController),c._readableStreamController._pendingPullIntos.length>0&&He(c._readableStreamController,0),b._readableStreamController._pendingPullIntos.length>0&&He(b._readableStreamController,0),(!i||!o)&&m(void 0)},_errorSteps:function(){t=!1}};ge(r,y)}function $(y,s){Y(r)&&(D(r),r=Wt(e),A(r));var _=s?b:c,v=s?c:b,z={_chunkSteps:function(X){ze(function(){n=!1,a=!1;var ve=s?o:i,je=s?i:o;if(je)ve||Ve(_._readableStreamController,X);else{var bn=void 0;try{bn=_t(X)}catch(Zr){E(_._readableStreamController,Zr),E(v._readableStreamController,Zr),m(q(e,Zr));return}ve||Ve(_._readableStreamController,X),Ue(v._readableStreamController,bn)}t=!1,n?j():a&&g()})},_closeSteps:function(X){t=!1;var ve=s?o:i,je=s?i:o;ve||we(_._readableStreamController),je||we(v._readableStreamController),X!==void 0&&(ve||Ve(_._readableStreamController,X),!je&&v._readableStreamController._pendingPullIntos.length>0&&He(v._readableStreamController,0)),(!ve||!je)&&m(void 0)},_errorSteps:function(){t=!1}};At(r,y,z)}function j(){if(t)return n=!0,p(void 0);t=!0;var y=Br(c._readableStreamController);return y===null?ye():$(y._view,!1),p(void 0)}function g(){if(t)return a=!0,p(void 0);t=!0;var y=Br(b._readableStreamController);return y===null?ye():$(y._view,!0),p(void 0)}function k(y){if(i=!0,u=y,o){var s=Re([u,d]),_=q(e,s);m(_)}return S}function C(y){if(o=!0,d=y,i){var s=Re([u,d]),_=q(e,s);m(_)}return S}function N(){}return c=Kt(N,j,k),b=Kt(N,g,C),A(r),[c,b]}function wa(e,r){L(e,r);var t=e,n=t?.autoAllocateChunkSize,a=t?.cancel,i=t?.pull,o=t?.start,u=t?.type;return{autoAllocateChunkSize:n===void 0?void 0:ut(n,r+" has member 'autoAllocateChunkSize' that"),cancel:a===void 0?void 0:Ca(a,t,r+" has member 'cancel' that"),pull:i===void 0?void 0:Pa(i,t,r+" has member 'pull' that"),start:o===void 0?void 0:Ta(o,t,r+" has member 'start' that"),type:u===void 0?void 0:Wa(u,r+" has member 'type' that")}}function Ca(e,r,t){return W(e,t),function(n){return J(e,r,[n])}}function Pa(e,r,t){return W(e,t),function(n){return J(e,r,[n])}}function Ta(e,r,t){return W(e,t),function(n){return Ie(e,r,[n])}}function Wa(e,r){if(e=""+e,e!=="bytes")throw new TypeError(r+" '"+e+"' is not a valid enumeration value for ReadableStreamType");return e}function Ea(e,r){L(e,r);var t=e?.mode;return{mode:t===void 0?void 0:qa(t,r+" has member 'mode' that")}}function qa(e,r){if(e=""+e,e!=="byob")throw new TypeError(r+" '"+e+"' is not a valid enumeration value for ReadableStreamReaderMode");return e}function Aa(e,r){L(e,r);var t=e?.preventCancel;return{preventCancel:Boolean(t)}}function Jt(e,r){L(e,r);var t=e?.preventAbort,n=e?.preventCancel,a=e?.preventClose,i=e?.signal;return i!==void 0&&Ba(i,r+" has member 'signal' that"),{preventAbort:Boolean(t),preventCancel:Boolean(n),preventClose:Boolean(a),signal:i}}function Ba(e,r){if(!Yn(e))throw new TypeError(r+" is not an AbortSignal.")}function Oa(e,r){L(e,r);var t=e?.readable;gr(t,"readable","ReadableWritablePair"),wr(t,r+" has member 'readable' that");var n=e?.writable;return gr(n,"writable","ReadableWritablePair"),Bt(n,r+" has member 'writable' that"),{readable:t,writable:n}}var Q=function(){function e(r,t){r===void 0&&(r={}),t===void 0&&(t={}),r===void 0?r=null:it(r,"First parameter");var n=Xe(t,"Second parameter"),a=wa(r,"First parameter");if(Gr(this),a.type==="bytes"){if(n.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");var i=Pe(n,0);kn(this,a,i)}else{var o=$e(n),i=Pe(n,1);va(this,a,i,o)}}return Object.defineProperty(e.prototype,"locked",{get:function(){if(!V(this))throw oe("locked");return G(this)},enumerable:!1,configurable:!0}),e.prototype.cancel=function(r){return r===void 0&&(r=void 0),V(this)?G(this)?f(new TypeError("Cannot cancel a stream that already has a reader")):q(this,r):f(oe("cancel"))},e.prototype.getReader=function(r){if(r===void 0&&(r=void 0),!V(this))throw oe("getReader");var t=Ea(r,"First parameter");return t.mode===void 0?le(this):Wt(this)},e.prototype.pipeThrough=function(r,t){if(t===void 0&&(t={}),!V(this))throw oe("pipeThrough");M(r,1,"pipeThrough");var n=Oa(r,"First parameter"),a=Jt(t,"Second parameter");if(G(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(me(n.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");var i=$t(this,n.writable,a.preventClose,a.preventAbort,a.preventCancel,a.signal);return Se(i),n.readable},e.prototype.pipeTo=function(r,t){if(t===void 0&&(t={}),!V(this))return f(oe("pipeTo"));if(r===void 0)return f("Parameter 1 is required in 'pipeTo'.");if(!be(r))return f(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));var n;try{n=Jt(t,"Second parameter")}catch(a){return f(a)}return G(this)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):me(r)?f(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):$t(this,r,n.preventClose,n.preventAbort,n.preventCancel,n.signal)},e.prototype.tee=function(){if(!V(this))throw oe("tee");var r=Sa(this);return Re(r)},e.prototype.values=function(r){if(r===void 0&&(r=void 0),!V(this))throw oe("values");var t=Aa(r,"First parameter");return Wn(this,t.preventCancel)},e}();Object.defineProperties(Q.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(Q.prototype,l.toStringTag,{value:"ReadableStream",configurable:!0}),typeof l.asyncIterator=="symbol"&&Object.defineProperty(Q.prototype,l.asyncIterator,{value:Q.prototype.values,writable:!0,configurable:!0});function Vr(e,r,t,n,a){n===void 0&&(n=1),a===void 0&&(a=function(){return 1});var i=Object.create(Q.prototype);Gr(i);var o=Object.create(ie.prototype);return Zt(i,o,e,r,t,n,a),i}function Kt(e,r,t){var n=Object.create(Q.prototype);Gr(n);var a=Object.create(K.prototype);return Tt(n,a,e,r,t,0,void 0),n}function Gr(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function V(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Q}function G(e){return e._reader!==void 0}function q(e,r){if(e._disturbed=!0,e._state==="closed")return p(void 0);if(e._state==="errored")return f(e._storedError);qe(e);var t=e._reader;t!==void 0&&re(t)&&(t._readIntoRequests.forEach(function(a){a._closeSteps(void 0)}),t._readIntoRequests=new T);var n=e._readableStreamController[vr](r);return Z(n,I)}function qe(e){e._state="closed";var r=e._reader;r!==void 0&&(rt(r),Y(r)&&(r._readRequests.forEach(function(t){t._closeSteps()}),r._readRequests=new T))}function xt(e,r){e._state="errored",e._storedError=r;var t=e._reader;t!==void 0&&(yr(t,r),Y(t)?(t._readRequests.forEach(function(n){n._errorSteps(r)}),t._readRequests=new T):(t._readIntoRequests.forEach(function(n){n._errorSteps(r)}),t._readIntoRequests=new T))}function oe(e){return new TypeError("ReadableStream.prototype."+e+" can only be used on a ReadableStream")}function en(e,r){L(e,r);var t=e?.highWaterMark;return gr(t,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Rr(t)}}var rn=function(e){return e.byteLength};try{Object.defineProperty(rn,"name",{value:"size",configurable:!0})}catch{}var Ae=function(){function e(r){M(r,1,"ByteLengthQueuingStrategy"),r=en(r,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!nn(this))throw tn("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!nn(this))throw tn("size");return rn},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Ae.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(Ae.prototype,l.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function tn(e){return new TypeError("ByteLengthQueuingStrategy.prototype."+e+" can only be used on a ByteLengthQueuingStrategy")}function nn(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Ae}var an=function(){return 1};try{Object.defineProperty(an,"name",{value:"size",configurable:!0})}catch{}var Be=function(){function e(r){M(r,1,"CountQueuingStrategy"),r=en(r,"First parameter"),this._countQueuingStrategyHighWaterMark=r.highWaterMark}return Object.defineProperty(e.prototype,"highWaterMark",{get:function(){if(!un(this))throw on("highWaterMark");return this._countQueuingStrategyHighWaterMark},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){if(!un(this))throw on("size");return an},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Be.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,l.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function on(e){return new TypeError("CountQueuingStrategy.prototype."+e+" can only be used on a CountQueuingStrategy")}function un(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Be}function ja(e,r){L(e,r);var t=e?.flush,n=e?.readableType,a=e?.start,i=e?.transform,o=e?.writableType;return{flush:t===void 0?void 0:ka(t,e,r+" has member 'flush' that"),readableType:n,start:a===void 0?void 0:za(a,e,r+" has member 'start' that"),transform:i===void 0?void 0:Ia(i,e,r+" has member 'transform' that"),writableType:o}}function ka(e,r,t){return W(e,t),function(n){return J(e,r,[n])}}function za(e,r,t){return W(e,t),function(n){return Ie(e,r,[n])}}function Ia(e,r,t){return W(e,t),function(n,a){return J(e,r,[n,a])}}var Oe=function(){function e(r,t,n){r===void 0&&(r={}),t===void 0&&(t={}),n===void 0&&(n={}),r===void 0&&(r=null);var a=Xe(t,"Second parameter"),i=Xe(n,"Third parameter"),o=ja(r,"First parameter");if(o.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(o.writableType!==void 0)throw new RangeError("Invalid writableType specified");var u=Pe(i,0),d=$e(i),c=Pe(a,1),b=$e(a),m,S=R(function(A){m=A});Fa(this,S,c,b,u,d),La(this,o),o.start!==void 0?m(o.start(this._transformStreamController)):m(void 0)}return Object.defineProperty(e.prototype,"readable",{get:function(){if(!ln(this))throw cn("readable");return this._readable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"writable",{get:function(){if(!ln(this))throw cn("writable");return this._writable},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Oe.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(Oe.prototype,l.toStringTag,{value:"TransformStream",configurable:!0});function Fa(e,r,t,n,a,i){function o(){return r}function u(S){return Na(e,S)}function d(S){return Ya(e,S)}function c(){return Ua(e)}e._writable=Vn(o,u,c,d,t,n);function b(){return Ha(e)}function m(S){return lr(e,S),p(void 0)}e._readable=Vr(o,b,m,a,i),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,fr(e,!0),e._transformStreamController=void 0}function ln(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Oe}function ur(e,r){H(e._readable._readableStreamController,r),lr(e,r)}function lr(e,r){fn(e._transformStreamController),Lr(e._writable._writableStreamController,r),e._backpressure&&fr(e,!1)}function fr(e,r){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=R(function(t){e._backpressureChangePromise_resolve=t}),e._backpressure=r}var _e=function(){function e(){throw new TypeError("Illegal constructor")}return Object.defineProperty(e.prototype,"desiredSize",{get:function(){if(!sr(this))throw dr("desiredSize");var r=this._controlledTransformStream._readable._readableStreamController;return Hr(r)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(r){if(r===void 0&&(r=void 0),!sr(this))throw dr("enqueue");sn(this,r)},e.prototype.error=function(r){if(r===void 0&&(r=void 0),!sr(this))throw dr("error");Ma(this,r)},e.prototype.terminate=function(){if(!sr(this))throw dr("terminate");Qa(this)},e}();Object.defineProperties(_e.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof l.toStringTag=="symbol"&&Object.defineProperty(_e.prototype,l.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function sr(e){return!w(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof _e}function Da(e,r,t,n){r._controlledTransformStream=e,e._transformStreamController=r,r._transformAlgorithm=t,r._flushAlgorithm=n}function La(e,r){var t=Object.create(_e.prototype),n=function(i){try{return sn(t,i),p(void 0)}catch(o){return f(o)}},a=function(){return p(void 0)};r.transform!==void 0&&(n=function(i){return r.transform(i,t)}),r.flush!==void 0&&(a=function(){return r.flush(t)}),Da(e,t,n,a)}function fn(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function sn(e,r){var t=e._controlledTransformStream,n=t._readable._readableStreamController;if(!pe(n))throw new TypeError("Readable side is not in a state that permits enqueue");try{ir(n,r)}catch(i){throw lr(t,i),t._readable._storedError}var a=ya(n);a!==t._backpressure&&fr(t,!0)}function Ma(e,r){ur(e._controlledTransformStream,r)}function dn(e,r){var t=e._transformAlgorithm(r);return Z(t,void 0,function(n){throw ur(e._controlledTransformStream,n),n})}function Qa(e){var r=e._controlledTransformStream,t=r._readable._readableStreamController;Ee(t);var n=new TypeError("TransformStream terminated");lr(r,n)}function Na(e,r){var t=e._transformStreamController;if(e._backpressure){var n=e._backpressureChangePromise;return Z(n,function(){var a=e._writable,i=a._state;if(i==="erroring")throw a._storedError;return dn(t,r)})}return dn(t,r)}function Ya(e,r){return ur(e,r),p(void 0)}function Ua(e){var r=e._readable,t=e._transformStreamController,n=t._flushAlgorithm();return fn(t),Z(n,function(){if(r._state==="errored")throw r._storedError;Ee(r._readableStreamController)},function(a){throw ur(e,a),r._storedError})}function Ha(e){return fr(e,!1),e._backpressureChangePromise}function dr(e){return new TypeError("TransformStreamDefaultController.prototype."+e+" can only be used on a TransformStreamDefaultController")}function cn(e){return new TypeError("TransformStream.prototype."+e+" can only be used on a TransformStream")}var $r={ReadableStream:Q,ReadableStreamDefaultController:ie,ReadableByteStreamController:K,ReadableStreamBYOBRequest:se,ReadableStreamDefaultReader:fe,ReadableStreamBYOBReader:de,WritableStream:ce,WritableStreamDefaultController:ne,WritableStreamDefaultWriter:he,ByteLengthQueuingStrategy:Ae,CountQueuingStrategy:Be,TransformStream:Oe,TransformStreamDefaultController:_e};if(typeof B<"u")for(var Xr in $r)Object.prototype.hasOwnProperty.call($r,Xr)&&Object.defineProperty(B,Xr,{value:$r[Xr],writable:!0,configurable:!0});h.ByteLengthQueuingStrategy=Ae,h.CountQueuingStrategy=Be,h.ReadableByteStreamController=K,h.ReadableStream=Q,h.ReadableStreamBYOBReader=de,h.ReadableStreamBYOBRequest=se,h.ReadableStreamDefaultController=ie,h.ReadableStreamDefaultReader=fe,h.TransformStream=Oe,h.TransformStreamDefaultController=_e,h.WritableStream=ce,h.WritableStreamDefaultController=ne,h.WritableStreamDefaultWriter=he,Object.defineProperty(h,"__esModule",{value:!0})})});var _n=xa(pn(),1);globalThis.ReadableStream||Object.assign(globalThis,{ReadableStream:_n.ReadableStream});
